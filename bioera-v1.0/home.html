<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BioEra - Home</title>
    <!-- Font Awesome CDN for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js"></script>
    <!-- Three.js CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <link rel="stylesheet" href="/assets/css/main.css">
    <style>
        .dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5);
            z-index: 1000;
            display: none;
        }
        .dialog button {
            margin-top: 10px;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
            <img style="width: 70px; height: 45px; padding-right: 10px;" src="assets/images/tlanimi_logo.png" alt="Tlanimi Logo">
            <div class="header-left-section">
                <div>
                    <h2 class="header-title">Tlanimi</h2>
                    <p class="header-subtitle">Unlocking potential</p>
                </div>
                <nav class="nav-menu">
                    <a href="home.html">Home</a>
                    <a href="#">Events</a>
                    <a href="#">Store</a>
                    <a href="learn-more.html">About</a>
                </nav>
            </div>
            <div class="shopping-cart">
                <a href="#" onclick="toggleCart(event)"><i class="fas fa-cart-shopping"></i></a>
                <div id="cart">
                    <h3>Cart</h3>
                    <p>Your cart is empty.</p>
                </div>
            </div>
        </div>
    </header>
    <div id="promo-wrapper-top">
        <div class="bioera-logo-section">
            <img src="images/bioera_logo_black.png" alt="BioEra Logo">
            <h2 class="bioera-keywords-title">Play, Learn, Collect</h2>
            <p class="bioera-keywords-subtitle">A collectible card game to explore and learn about the natural world.</p>
        </div>
    </div>
    <div class="section">
        <p id="purpose-title">Our Purpose</p>
        <img src="images/kickstart_promo.png" alt="Promo Picture KST">
        <p style="margin: 1rem auto 2rem auto;">BioEra rewards the curiosity of young minds through an engaging card game </br> that makes learning about nature fun</p>
        <div id="learn-more">
            <a href="learn-more.html" class="button">Learn our story</a>
        </div>
    </div>
    <div class="section" id="section-two">
        <p id="purpose-title">Animal Kingdoms</p>
        <img src="images/simba.png" alt="Section 2 Image 1">
        <img src="images/cheetah_carnivore.png" alt="Section 2 Image 2">
        <img src="images/elephant_herb.png" alt="Section 2 Image 1">
        <img src="images/yacal_omni.png" alt="Section 2 Image 2">
        <img src="images/elephant_grass_prod.png" alt="Section 2 Image 1">
        <img src="images/beetle_decomp.png" alt="Section 2 Image 2">
        <p>Understand how to use your cards and the different trophic levels</br> This will help you build a strategy to win the game </br></p>
        <div id="learn-more">
            <a href="learn-more.html" class="button">Explore</a>
        </div>
    </div>
    <div class="section" id="section-continent">
        <p id="purpose-title">Choose your continent</p>
        <div id="globe-container"></div>
        <p style="margin-bottom: 4rem;">Select the continent that you want to know more about</p>
        <div id="continent-dialog" class="dialog">
            <h3 id="dialog-title">Continent Info</h3>
            <p id="dialog-content">Select a marker to learn more about this continent.</p>
            <button onclick="closeDialog()">Close</button>
        </div>
    </div>
    <div id="promo-wrapper">
        <section id="promo">
            <h2 style="font-family: Paytone One; font-size: 3rem;">BioEra Online is almost here!</h2>
            <p>Get to know how you can use your deck of cards to play online</p>
            <form id="bio-online-form" class="bio-online-form" method="post" style="margin-left: 18rem; margin-right: 18rem; margin-top: 3rem;">
                <input id="email" name="email" placeholder="Your Email" type="text" />
                <div id="success-message" style="height: 0; min-height: 0; overflow: hidden; font-family: 'Lexend', sans-serif; font-size: 1rem; text-align: center; transition: height 0.3s ease, min-height 0.3s ease;"></div>
                <div id="subscribe-btn" style="margin: 3rem auto 3rem auto;">
                    <button type="submit" class="button">Subscribe to get notified</button>
                </div>
            </form>
        </section>
    </div>
    <div id="footer-wrapper">
        <div id="footer">
            <div class="footer-row">
                <div class="social-media">
                    <a href="https://twitter.com" target="_blank"><i class="fab fa-twitter" style="padding-right: 10px;"></i>Twitter</a>
                    <a href="https://www.facebook.com/profile.php?id=61564506149516" target="_blank"><i class="fab fa-facebook-f" style="padding-right: 10px;"></i>Facebook</a>
                    <a href="https://instagram.com" target="_blank"><i class="fab fa-instagram" style="padding-right: 10px;"></i>Instagram</a>
                    <a href="https://youtube.com" target="_blank"><i class="fab fa-youtube" style="padding-right: 10px;"></i>YouTube</a>
                </div>
            </div>
            <div id="copyright">
                <p>Â© 2025 Tlanimi. All rights reserved. | Santa Clara, CA 95050, USA</p>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r172/three.min.js"></script>
    <script type="module" src="script.js"></script>
    <script>
        function toggleCart(event) {
            event.preventDefault();
            const cart = document.getElementById('cart');
            cart.style.display = cart.style.display === 'block' ? 'none' : 'block';
        }
    
        function closeDialog() {
            document.getElementById('continent-dialog').style.display = 'none';
        }
    
        // Three.js code for 3D globe with arrows and dialogs
        (function () {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(62, window.innerWidth / 385, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
            renderer.setSize(window.innerWidth * 0.78, 385); // Match container height
            renderer.setClearColor(0x000000, 0);
            document.getElementById('globe-container').appendChild(renderer.domElement);
    
            // Globe
            const geometry = new THREE.SphereGeometry(5, 64, 64);
            const textureLoader = new THREE.TextureLoader();
            const material = new THREE.MeshStandardMaterial({
                map: textureLoader.load('./assets/images/globe.jpg', undefined, (error) => {
                    console.error('Texture loading error:', error);
                    // Fallback to solid color if texture fails
                    material.map = null;
                    material.color = new THREE.Color(0x0000ff);
                    material.needsUpdate = true;
                }),
                roughness: 0.7,
                metalness: 0.1
            });
    
            const earth = new THREE.Mesh(geometry, material);
            scene.add(earth);
    
            // Add arrows for Africa
            const arrowPositions = [
                { lat: 0, lon: 20, info: "Central Africa: Rich biodiversity with rainforests and savannas." },
                { lat: -30, lon: 25, info: "South Africa: Home to diverse wildlife like lions and elephants." }
            ];
    
            const arrows = [];
            arrowPositions.forEach(pos => {
                const arrowGeometry = new THREE.ConeGeometry(0.3, 1.0, 32); // Larger arrow
                const arrowMaterial = new THREE.MeshBasicMaterial({ color: 0xff0000 });
                const arrow = new THREE.Mesh(arrowGeometry, arrowMaterial);
                
                // Convert lat/lon to 3D coordinates
                const phi = (90 - pos.lat) * Math.PI / 180;
                const theta = (pos.lon + 180) * Math.PI / 180;
                const radius = 5.3; // Further from surface for visibility
                arrow.position.set(
                    radius * Math.sin(phi) * Math.cos(theta),
                    radius * Math.cos(phi),
                    radius * Math.sin(phi) * Math.sin(theta)
                );
                
                // Orient arrow
                arrow.lookAt(arrow.position.clone().multiplyScalar(2));
                arrow.rotateX(Math.PI / 2);
                arrow.userData = { info: pos.info };
                scene.add(arrow);
                arrows.push(arrow);
                console.log('Arrow added at position:', arrow.position); // Debug
            });
    
            camera.position.z = 10;
    
            // Lighting
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 5, 10);
            scene.add(directionalLight);
    
            // Raycasting for clicks
            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
    
            function onClick(event) {
                event.preventDefault();
                const rect = renderer.domElement.getBoundingClientRect();
                // Account for canvas offset
                mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
                mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
    
                raycaster.setFromCamera(mouse, camera);
                const intersects = raycaster.intersectObjects(arrows);
                console.log('Click detected, intersects:', intersects.length); // Debug
    
                if (intersects.length > 0) {
                    const dialog = document.getElementById('continent-dialog');
                    document.getElementById('dialog-title').textContent = "Africa";
                    document.getElementById('dialog-content').textContent = intersects[0].object.userData.info;
                    dialog.style.display = 'block';
                    console.log('Dialog opened with info:', intersects[0].object.userData.info); // Debug
                }
            }
    
            renderer.domElement.addEventListener('click', onClick);
    
            function animate() {
                requestAnimationFrame(animate);
                earth.rotation.y += 0.005;
                arrows.forEach(arrow => {
                    arrow.rotation.z += 0.01; // Gentle rotation
                });
                renderer.render(scene, camera);
            }
            animate();
    
            // Resize handler
            window.addEventListener('resize', () => {
                const width = window.innerWidth * 0.78;
                const height = 385;
                renderer.setSize(width, height);
                camera.aspect = width / height;
                camera.updateProjectionMatrix();
            });
    
            // Drag controls
            let isDragging = false;
            let previousMousePosition = { x: 0, y: 0 };
    
            renderer.domElement.addEventListener('mousedown', (e) => {
                isDragging = true;
                previousMousePosition = { x: e.clientX, y: e.clientY };
            });
    
            document.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    const deltaMove = {
                        x: e.clientX - previousMousePosition.x,
                        y: e.clientY - previousMousePosition.y
                    };
                    earth.rotation.y += deltaMove.x * 0.005;
                    earth.rotation.x += deltaMove.y * 0.005;
                    previousMousePosition = { x: e.clientX, y: e.clientY };
                }
            });
    
            document.addEventListener('mouseup', () => {
                isDragging = false;
            });
    
            // Touch controls
            renderer.domElement.addEventListener('touchstart', (e) => {
                if (e.touches.length === 1) {
                    isDragging = true;
                    previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                }
            });
    
            document.addEventListener('touchmove', (e) => {
                if (isDragging && e.touches.length == 1) {
                    const deltaMove = {
                        x: e.touches[0].clientX - previousMousePosition.x,
                        y: e.touches[0].clientY - previousMousePosition.y
                    };
                    earth.rotation.y += deltaMove.x * 0.005;
                    earth.rotation.x += deltaMove.y * 0.005;
                    previousMousePosition = { x: e.touches[0].clientX, y: e.touches[0].clientY };
                }
            });
    
            document.addEventListener('touchend', () => {
                isDragging = false;
            });
        })();
    </script>
</body>
</html>